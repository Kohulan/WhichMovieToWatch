---
phase: 06-bento-grid-layouts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/bento/BentoGrid.tsx
  - src/components/bento/BentoCell.tsx
  - src/components/bento/index.ts
autonomous: true
requirements:
  - BENT-01
  - BENT-04
  - BENT-05

must_haves:
  truths:
    - "BentoGrid renders a CSS Grid container with 1 column on mobile, 2 on tablet, 12 on desktop"
    - "BentoCell supports glass and clay material variants with correct visual styles"
    - "BentoCell hover lifts the card with scale, elevated shadow, and accent glow"
    - "BentoCell supports variable column and row spanning via props"
    - "Grid cells animate position smoothly when viewport is resized across breakpoints"
    - "BentoCell overlay content reveals on hover (desktop) and tap (mobile)"
  artifacts:
    - path: "src/components/bento/BentoGrid.tsx"
      provides: "Responsive CSS Grid container with Framer Motion layout animation"
      min_lines: 30
    - path: "src/components/bento/BentoCell.tsx"
      provides: "Cell wrapper with glass/clay materials, hover effects, tap-to-expand, overlay reveal"
      min_lines: 80
    - path: "src/components/bento/index.ts"
      provides: "Barrel exports for BentoGrid and BentoCell"
  key_links:
    - from: "src/components/bento/BentoGrid.tsx"
      to: "motion/react"
      via: "motion.div with layout prop for animated reflow"
      pattern: "layout"
    - from: "src/components/bento/BentoCell.tsx"
      to: "motion/react"
      via: "whileHover scale + shadow + glow, whileTap, layout"
      pattern: "whileHover"
---

<objective>
Create the foundational BentoGrid container and BentoCell components that power all bento grid layouts in the application.

Purpose: Establish reusable, responsive, animated bento grid primitives that handle CSS Grid layout, material variants (glassmorphism/claymorphism), hover/tap interactions, and Framer Motion layout animations for smooth viewport reflow. These are the building blocks consumed by the HomePage hero grid and per-page bento hero sections.

Output: `src/components/bento/BentoGrid.tsx`, `src/components/bento/BentoCell.tsx`, `src/components/bento/index.ts`
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-bento-grid-layouts/06-RESEARCH.md

Key codebase references:
@src/components/ui/ClayCard.tsx — Existing claymorphism card pattern (clay-shadow-md, clay-surface, texture overlay)
@src/components/animation/StaggerContainer.tsx — Existing stagger animation pattern
@src/styles/clay.css — Clay shadow presets and texture classes
@src/styles/metal.css — Metal material classes (for accent-glow pattern reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BentoGrid responsive container component</name>
  <files>src/components/bento/BentoGrid.tsx</files>
  <action>
Create `src/components/bento/BentoGrid.tsx` — a CSS Grid container component with responsive breakpoints and Framer Motion layout animation.

**Props interface:**
```typescript
interface BentoGridProps {
  children: ReactNode;
  className?: string;
  /** Number of columns at desktop breakpoint (default: 12) */
  columns?: 4 | 6 | 12;
}
```

**Implementation details:**

1. Use `motion.div` from `motion/react` as the root element with `layout` prop for animated reflow on resize.

2. CSS Grid classes (using Tailwind responsive prefixes — NOT dynamic class names):
   - Mobile (default): `grid-cols-1` — single column stack
   - Tablet (md:): `grid-cols-2` — 2-column grid
   - Desktop (lg:): Use a lookup object for columns prop → class mapping:
     ```typescript
     const desktopColClasses: Record<number, string> = {
       4: 'lg:grid-cols-4',
       6: 'lg:grid-cols-6',
       12: 'lg:grid-cols-12',
     };
     ```
   - Desktop auto-rows: `lg:auto-rows-[minmax(120px,auto)]` — minimum 120px row height, auto-expand for content
   - `grid-flow-dense` to prevent gaps when large cells push smaller ones to next row

3. Gap spacing: `gap-4 lg:gap-5` (16px mobile, 20px desktop) per research recommendation.

4. Layout animation transition: spring physics `{ type: 'spring', stiffness: 200, damping: 25 }` for smooth reflow when breakpoints change.

5. Do NOT apply `auto-rows` on mobile/tablet — let rows auto-size to content (prevents height collapse pitfall from research).

**CRITICAL:** Use the Tailwind class lookup object pattern — do NOT construct class names dynamically with template literals (e.g., `lg:grid-cols-${columns}` will NOT work with Tailwind v4 static analysis).
  </action>
  <verify>
Run `npx tsc --noEmit` — no type errors. Visually inspect: the component uses `motion.div` with `layout` prop, uses static Tailwind class strings via lookup object, has responsive grid-cols breakpoints.
  </verify>
  <done>
BentoGrid component renders a responsive CSS Grid: 1-col mobile, 2-col tablet, configurable (4/6/12) columns desktop. Uses Framer Motion layout for animated reflow. Gap spacing is 16px mobile / 20px desktop. No dynamic Tailwind class name construction.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create BentoCell component with materials, hover effects, and tap-to-expand</name>
  <files>src/components/bento/BentoCell.tsx, src/components/bento/index.ts</files>
  <action>
Create `src/components/bento/BentoCell.tsx` — the individual cell wrapper supporting two material styles, hover animations, overlay reveal, and mobile tap-to-expand.

**Props interface:**
```typescript
type CellMaterial = 'glass' | 'clay';

interface BentoCellProps {
  children: ReactNode;
  /** Column span at each breakpoint. Use lookup objects, not dynamic classes. */
  colSpan?: { mobile?: 1; tablet?: 1 | 2; desktop: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 };
  /** Row span at desktop (default: 1) */
  rowSpan?: 1 | 2 | 3;
  /** Material variant */
  material?: CellMaterial;
  className?: string;
  /** Content revealed on hover (desktop) or tap expand (mobile) */
  overlay?: ReactNode;
  /** Click/tap handler — if provided, enables tap-to-expand on mobile */
  onClick?: () => void;
  /** Hide on mobile (decorative cells) */
  hideOnMobile?: boolean;
}
```

**Implementation details:**

1. **Tailwind class lookup objects** (CRITICAL — no dynamic string construction):
   ```typescript
   const lgColSpanClasses: Record<number, string> = {
     1: 'lg:col-span-1', 2: 'lg:col-span-2', 3: 'lg:col-span-3',
     4: 'lg:col-span-4', 5: 'lg:col-span-5', 6: 'lg:col-span-6',
     7: 'lg:col-span-7', 8: 'lg:col-span-8', 9: 'lg:col-span-9',
     10: 'lg:col-span-10', 11: 'lg:col-span-11', 12: 'lg:col-span-12',
   };
   const mdColSpanClasses: Record<number, string> = {
     1: 'md:col-span-1', 2: 'md:col-span-2',
   };
   const lgRowSpanClasses: Record<number, string> = {
     1: '', 2: 'lg:row-span-2', 3: 'lg:row-span-3',
   };
   ```

2. **Material classes** (two variants per user decision):
   - `glass`: `'bg-white/[0.08] backdrop-blur-xl border border-white/10 shadow-lg shadow-black/10'` — glassmorphism for hero/large cells
   - `clay`: `'bg-clay-surface border border-white/10 clay-shadow-md'` — claymorphism for supporting cells (reuses existing clay patterns from ClayCard)

3. **Hover treatment** (per locked decision — full treatment):
   - Use `motion.div` with `whileHover`:
     ```typescript
     whileHover={{
       scale: 1.03,
       boxShadow: '0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px oklch(var(--accent))',
       transition: { type: 'spring', stiffness: 300, damping: 20 },
     }}
     ```
   - `whileTap={{ scale: 0.98 }}` for press feedback
   - Overlay reveal: `group` class on container, overlay div has `opacity-0 group-hover:opacity-100 transition-opacity duration-200`

4. **Layout animation** — `layout` prop on the motion.div for smooth reflow. Set `borderRadius` and `boxShadow` as **inline styles** (not CSS classes) to prevent distortion during layout FLIP animation (key pitfall from research):
   ```typescript
   style={{ borderRadius: '1rem' }}
   ```

5. **Mobile tap-to-expand** (per locked decision):
   - Internal `expanded` state via `useState(false)`
   - `handleClick`: if `window.innerWidth < 768 && !expanded`, set `expanded(true)` and return (shows overlay/extra info). If already expanded or desktop, call `onClick` prop.
   - Auto-collapse: `useEffect` with 4-second timeout to reset `expanded` to false (prevents stale expanded state pitfall from research).
   - Wrap expanded content in `AnimatePresence` with `motion.div` fade-in/slide-up animation.

6. **Hide on mobile**: If `hideOnMobile` is true, add `hidden md:block` to the outer class list.

7. **Accessibility**: `role="button"` when onClick is provided, `tabIndex={0}` for keyboard focus, `onKeyDown` handler for Enter/Space triggering the click.

Then create `src/components/bento/index.ts` — barrel export:
```typescript
export { BentoGrid } from './BentoGrid';
export { BentoCell } from './BentoCell';
export type { BentoCellProps, CellMaterial } from './BentoCell';
```
  </action>
  <verify>
Run `npx tsc --noEmit` — no type errors. Verify: BentoCell uses lookup objects for all col-span/row-span classes (grep for template literal `col-span-${` should return 0 results). Verify `style={{ borderRadius` is used (inline, not className). Verify barrel exports compile.
  </verify>
  <done>
BentoCell component supports glass/clay materials, variable col/row spans via static Tailwind class lookups, full hover treatment (scale 1.03 + shadow + accent glow), mobile tap-to-expand with auto-collapse timeout, overlay reveal, layout animation with inline borderRadius, hideOnMobile prop, and keyboard accessibility. Barrel exports in index.ts expose BentoGrid and BentoCell.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. `grep -r 'col-span-\$' src/components/bento/` returns 0 results (no dynamic Tailwind classes)
3. BentoGrid.tsx contains `layout` prop on motion.div
4. BentoCell.tsx contains `whileHover` with scale ~1.03 and boxShadow
5. BentoCell.tsx contains `style={{ borderRadius` inline (not className rounded-*)
6. BentoCell.tsx has both glass and clay material class mappings
7. BentoCell.tsx has tap-to-expand logic with auto-collapse timeout
8. index.ts exports both BentoGrid and BentoCell
</verification>

<success_criteria>
- BentoGrid and BentoCell are importable from `@/components/bento`
- BentoGrid creates a responsive CSS Grid: 1-col mobile, 2-col tablet, 12-col desktop
- BentoCell applies correct material (glass/clay), hover effects, layout animation
- All Tailwind col-span/row-span classes use static lookup objects
- Mobile tap-to-expand works with auto-collapse
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-bento-grid-layouts/06-01-SUMMARY.md`
</output>
