---
phase: 06-bento-grid-layouts
plan: 02
type: execute
wave: 2
depends_on:
  - 06-01
files_modified:
  - src/pages/HomePage.tsx
  - src/components/bento/cells/DiscoverHeroCell.tsx
  - src/components/bento/cells/TrendingPreviewCell.tsx
  - src/components/bento/cells/RatingShowcaseCell.tsx
  - src/components/bento/cells/ProviderLogosCell.tsx
  - src/components/bento/cells/DinnerTimeCell.tsx
  - src/components/bento/cells/FreeMoviesCell.tsx
  - src/components/bento/cells/SearchCell.tsx
  - src/main.tsx
  - src/components/layout/TabBar.tsx
autonomous: true
requirements:
  - BENT-02
  - BENT-03

must_haves:
  truths:
    - "User lands on a new HomePage with a bento grid hero showing trending movies, ratings, and provider logos"
    - "Discover CTA cell prominently invites user to start discovering movies"
    - "Trending preview cell shows real movie poster thumbnails from useTrending hook"
    - "Rating showcase cell displays live rating numbers"
    - "Provider logos cell shows streaming service logos"
    - "Feature CTA cells (Dinner Time, Free Movies, Search) link to their respective pages"
    - "TabBar includes a Home tab that navigates to the new home page"
    - "DiscoverPage is now at /discover route and accessible from TabBar"
    - "Bento cells use staggered fade-up animation on scroll entry"
  artifacts:
    - path: "src/pages/HomePage.tsx"
      provides: "Home page with bento hero grid layout"
      min_lines: 50
    - path: "src/components/bento/cells/DiscoverHeroCell.tsx"
      provides: "Large glassmorphism CTA cell with movie backdrop"
      min_lines: 30
    - path: "src/components/bento/cells/TrendingPreviewCell.tsx"
      provides: "Trending movie poster thumbnails cell"
      min_lines: 25
    - path: "src/components/bento/cells/RatingShowcaseCell.tsx"
      provides: "Live rating numbers display cell"
      min_lines: 20
    - path: "src/components/bento/cells/ProviderLogosCell.tsx"
      provides: "Streaming provider logos grid cell"
      min_lines: 20
    - path: "src/components/bento/cells/DinnerTimeCell.tsx"
      provides: "Dinner Time feature CTA cell"
      min_lines: 20
    - path: "src/components/bento/cells/FreeMoviesCell.tsx"
      provides: "Free Movies feature CTA cell"
      min_lines: 20
    - path: "src/components/bento/cells/SearchCell.tsx"
      provides: "Search feature CTA cell"
      min_lines: 20
  key_links:
    - from: "src/pages/HomePage.tsx"
      to: "src/components/bento/BentoGrid.tsx"
      via: "BentoGrid import rendering the hero grid"
      pattern: "BentoGrid"
    - from: "src/pages/HomePage.tsx"
      to: "src/components/animation/StaggerContainer.tsx"
      via: "StaggerContainer wrapping BentoGrid for scroll entry stagger"
      pattern: "StaggerContainer"
    - from: "src/components/bento/cells/TrendingPreviewCell.tsx"
      to: "src/hooks/useTrending.ts"
      via: "useTrending hook fetching live movie data for poster thumbnails"
      pattern: "useTrending"
    - from: "src/main.tsx"
      to: "src/pages/HomePage.tsx"
      via: "HashRouter index route mapping"
      pattern: "HomePage"
    - from: "src/components/layout/TabBar.tsx"
      to: "/"
      via: "Home tab NavLink"
      pattern: "Home"
---

<objective>
Create the HomePage with a bento hero grid and all content-specific cell components, then update routing and TabBar to make the home page the landing experience.

Purpose: The home page is the showcase entry point — it uses a bento grid with a mix of glassmorphism hero cells (Discover CTA, Trending preview) and claymorphism feature cells (Dinner Time, Free Movies, Search) to give users an immediate sense of what the app offers. Live data (trending posters, ratings, provider logos) makes the grid feel alive. The TabBar and routing are updated to support 5 tabs with Home as the landing page and Discover at `/discover`.

Output: `src/pages/HomePage.tsx`, 7 cell components in `src/components/bento/cells/`, updated `src/main.tsx` routing, updated TabBar with Home tab.
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-bento-grid-layouts/06-RESEARCH.md
@.planning/phases/06-bento-grid-layouts/06-01-SUMMARY.md

Key codebase references:
@src/components/bento/BentoGrid.tsx — BentoGrid container (from Plan 01)
@src/components/bento/BentoCell.tsx — BentoCell with materials/hover/tap (from Plan 01)
@src/hooks/useTrending.ts — Trending movies hook for live poster data
@src/hooks/useRandomMovie.ts — Discovery hook for movie backdrop
@src/components/movie/RatingBadges.tsx — Rating display patterns
@src/components/movie/ProviderSection.tsx — Provider logo patterns
@src/components/ui/MetalButton.tsx — CTA button component
@src/components/animation/StaggerContainer.tsx — Stagger animation wrapper
@src/main.tsx — Current route configuration
@src/components/layout/TabBar.tsx — Current 4-tab navigation
@src/components/dinner-time/ServiceBranding.tsx — Service branding for DinnerTime context
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create all bento cell content components</name>
  <files>
    src/components/bento/cells/DiscoverHeroCell.tsx
    src/components/bento/cells/TrendingPreviewCell.tsx
    src/components/bento/cells/RatingShowcaseCell.tsx
    src/components/bento/cells/ProviderLogosCell.tsx
    src/components/bento/cells/DinnerTimeCell.tsx
    src/components/bento/cells/FreeMoviesCell.tsx
    src/components/bento/cells/SearchCell.tsx
  </files>
  <action>
Create 7 cell content components inside `src/components/bento/cells/`. Each cell renders the CONTENT that goes inside a BentoCell wrapper. The parent (HomePage) wraps each in BentoCell with the appropriate material/span props.

**1. DiscoverHeroCell.tsx** — Large glassmorphism hero cell (will be col-span-6, row-span-2 on desktop)
- Fetch a trending movie backdrop using `useTrending()` hook (take first movie's backdrop_path)
- Show movie backdrop as background image: `https://image.tmdb.org/t/p/w1280{backdrop_path}` with `object-cover absolute inset-0`
- Glassmorphism overlay: `bg-black/30 backdrop-blur-md` over the image
- Content: heading "Discover Your Next Movie", subtext "Smart recommendations powered by your taste", MetalButton CTA "Start Discovering"
- Click CTA → `useNavigate()` to `/discover`
- If trending data is loading, show a gradient placeholder background instead of movie image

**2. TrendingPreviewCell.tsx** — Live trending posters (col-span-3, row-span-2)
- Use `useTrending()` hook to get movie list
- Show 3 trending movie posters in a vertical stack/overlapping fan layout
- Each poster: `https://image.tmdb.org/t/p/w342{poster_path}` with `rounded-lg` styling
- Small "Now Playing" label at top
- Click → navigate to `/trending`
- Loading state: 3 skeleton rectangles with shimmer animation (use clay-shimmer class)

**3. RatingShowcaseCell.tsx** — Live rating numbers (col-span-3, row-span-1)
- Use `useTrending()` to get first movie with a vote_average
- Display the TMDB rating number in large font (e.g., "8.2") with a star icon (Star from lucide-react)
- Show movie title below in small text
- Label "Top Rated" or "Audience Score"
- This is a clay material cell (claymorphism)
- Click → navigate to `/trending`

**4. ProviderLogosCell.tsx** — Streaming provider logos (col-span-3, row-span-1)
- Import the `PROVIDER_REGISTRY` from `@/utils/providerRegistry` (or use static logos)
- Show top 6-8 streaming provider logos (Netflix, Disney+, Amazon Prime, Apple TV+, etc.) in a small grid
- Use TMDB image URLs for provider logos: `https://image.tmdb.org/t/p/original{logo_path}` — OR use static provider logo URLs from the provider registry
- Label "60+ Streaming Services"
- This is a clay material cell
- hideOnMobile: true (decorative per research recommendation)

**5. DinnerTimeCell.tsx** — Feature CTA (col-span-4, row-span-1)
- UtensilsCrossed icon from lucide-react
- Heading "Dinner Time" with subtext "Family-friendly movies for movie night"
- Small MetalButton or styled link "Find a Movie"
- Clay material cell
- Click → navigate to `/dinner-time`

**6. FreeMoviesCell.tsx** — Feature CTA (col-span-4, row-span-1)
- Film icon from lucide-react (or Play)
- Heading "Free Movies" with subtext "1,000+ movies free on YouTube"
- Small MetalButton or styled link "Browse Free"
- Clay material cell
- Click → navigate to `/free-movies`

**7. SearchCell.tsx** — Feature CTA (col-span-4, row-span-1)
- Search icon from lucide-react
- Heading "Advanced Search" with subtext "Filter by genre, year, rating, and more"
- Clay material cell
- Click → open SearchModal directly (import and call the search modal open function from search store or use a callback prop). If SearchModal open mechanism is not easily accessible, navigate to `/discover` as fallback.

**Shared patterns across all cells:**
- Use `useNavigate()` from react-router for navigation
- Use Lucide React icons consistently (already in project)
- Font classes: `font-heading` for headings, `text-clay-text` / `text-clay-text-muted` for body
- Keep each component focused — no BentoCell wrapper inside (parent composes that)
- Export as named exports
  </action>
  <verify>
Run `npx tsc --noEmit` — all 7 cell components compile without errors. Each component imports and uses the correct hooks/utilities. No cell component imports or wraps itself in BentoCell (that's the parent's job).
  </verify>
  <done>
7 bento cell content components created: DiscoverHeroCell (glassmorphism hero with movie backdrop + CTA), TrendingPreviewCell (live poster thumbnails), RatingShowcaseCell (live rating number), ProviderLogosCell (streaming service logos), DinnerTimeCell (feature CTA), FreeMoviesCell (feature CTA), SearchCell (feature CTA). All use live data where applicable via useTrending hook.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create HomePage, update routing and TabBar</name>
  <files>
    src/pages/HomePage.tsx
    src/main.tsx
    src/components/layout/TabBar.tsx
  </files>
  <action>
**1. Create `src/pages/HomePage.tsx`:**

Compose all cell components into a BentoGrid hero layout using BentoGrid and BentoCell from `@/components/bento`.

Grid composition (desktop 12-column layout per research recommendation):

```
| Discover CTA (6 cols, 2 rows, glass) | Trending Preview (3 cols, 2 rows, glass) | Rating (3 cols, 1 row, clay)   |
|                                       |                                           | Providers (3 cols, 1 row, clay)|
| Dinner Time (4 cols, 1 row, clay)     | Free Movies (4 cols, 1 row, clay)         | Search (4 cols, 1 row, clay)   |
```

Implementation:
- Wrap the entire grid section in `StaggerContainer` with `stagger={0.12}` and `direction="up"` for scroll entry stagger animation (100-150ms stagger per locked decision)
- Each BentoCell is wrapped in `StaggerItem` with `direction="up"` for individual stagger
- BentoCell props per cell:
  - DiscoverHeroCell: `material="glass"` `colSpan={{ tablet: 2, desktop: 6 }}` `rowSpan={2}`
  - TrendingPreviewCell: `material="glass"` `colSpan={{ desktop: 3 }}` `rowSpan={2}`
  - RatingShowcaseCell: `material="clay"` `colSpan={{ desktop: 3 }}`
  - ProviderLogosCell: `material="clay"` `colSpan={{ desktop: 3 }}` `hideOnMobile={true}`
  - DinnerTimeCell: `material="clay"` `colSpan={{ desktop: 4 }}`
  - FreeMoviesCell: `material="clay"` `colSpan={{ desktop: 4 }}`
  - SearchCell: `material="clay"` `colSpan={{ desktop: 4 }}`

- Each cell that navigates passes its navigate handler to BentoCell's `onClick` prop (enables tap-to-expand on mobile)
- BentoCell overlay prop: for feature CTA cells, pass a small overlay with "Tap to explore" text that reveals on hover/expand
- Page wrapper: `<div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">`
- Optional: Add a small heading above the grid: "Welcome to WhichMovieToWatch" or similar

**2. Update `src/main.tsx` routing:**

Change route configuration:
- Import `HomePage` from `./pages/HomePage`
- `{ index: true, element: <HomePage /> }` — HomePage is now the landing page
- `{ path: 'discover', element: <DiscoverPage /> }` — DiscoverPage moves to /discover
- Keep all other routes unchanged (trending, dinner-time, free-movies, showcase)
- This means the old index route (DiscoverPage at `/`) now lives at `/discover`

**3. Update `src/components/layout/TabBar.tsx`:**

Add a Home tab as the first tab. Update the tabs array to 5 items:

```typescript
import { Home, Compass, TrendingUp, UtensilsCrossed, Film } from 'lucide-react';

const tabs = [
  { to: '/', end: true, icon: Home, label: 'Home' },
  { to: '/discover', end: false, icon: Compass, label: 'Discover' },
  { to: '/trending', end: false, icon: TrendingUp, label: 'Trending' },
  { to: '/dinner-time', end: false, icon: UtensilsCrossed, label: 'Dinner' },
  { to: '/free-movies', end: false, icon: Film, label: 'Free' },
];
```

- The Home tab uses the `Home` icon from lucide-react
- Discover tab uses `Compass` icon (unchanged) but now routes to `/discover`
- Shorten labels if 5 tabs is tight on mobile — keep single-word labels
- The existing layoutId sliding indicator and bounce animation work automatically with the new tab
- No structural changes needed to TabBar logic — it's already data-driven via the tabs array

**Important:** Verify that deep links still work. The `?movie=ID` deep link pattern in DiscoverPage should still function at `/discover?movie=ID`. Check `useDeepLink` hook — it reads from `window.location.search` which works regardless of route path.
  </action>
  <verify>
1. `npx tsc --noEmit` — no type errors
2. `npm run build` — builds successfully
3. Dev server: visiting `/#/` shows HomePage with bento grid
4. Dev server: visiting `/#/discover` shows DiscoverPage
5. TabBar has 5 tabs with Home as first, all navigation works
6. Staggered fade-up animation visible when HomePage scrolls into view
  </verify>
  <done>
HomePage renders a bento hero grid with 7 cells (Discover CTA, Trending preview, Rating showcase, Provider logos, Dinner Time, Free Movies, Search) using BentoGrid/BentoCell composition. Cells use correct materials (glass for hero, clay for features). Stagger animation plays on scroll entry. Routing updated: Home at `/`, Discover at `/discover`. TabBar has 5 tabs with Home icon as first tab. All navigation and deep links work.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npm run build` succeeds
3. HomePage loads at `/#/` with all 7 bento cells visible on desktop
4. Cells display correct materials: glass (Discover, Trending) and clay (Rating, Providers, Dinner, Free, Search)
5. Trending preview cell shows real movie posters from TMDB API
6. Rating showcase shows live rating number
7. CTA cells navigate to correct routes on click
8. StaggerContainer produces fade-up stagger animation on scroll entry
9. TabBar shows 5 tabs: Home, Discover, Trending, Dinner, Free
10. DiscoverPage accessible at `/#/discover`
11. Mobile: Provider logos cell is hidden, other cells stack vertically
</verification>

<success_criteria>
- User sees a visually impactful bento grid hero on the home page with live movie data
- All 7 cells render with appropriate content and materials
- Navigation from cells to feature pages works
- Routing change is backward-compatible (Discover at /discover)
- TabBar has Home tab as entry point
- Stagger reveal animation plays when grid enters viewport
</success_criteria>

<output>
After completion, create `.planning/phases/06-bento-grid-layouts/06-02-SUMMARY.md`
</output>
