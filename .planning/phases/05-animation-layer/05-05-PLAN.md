---
phase: 05-animation-layer
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/metal.css
  - src/styles/clay.css
  - src/components/ui/MetalToggle.tsx
  - src/components/ui/MetalSlider.tsx
  - src/components/ui/RotaryDial.tsx
  - src/components/ui/ClayCard.tsx
autonomous: true
requirements: [ANIM-03]

must_haves:
  truths:
    - "Metal toggle knob has a visible specular highlight (bright spot top-left) and deeper track inset shadow"
    - "Metal slider track has deeper inset shadow and knob has specular highlight"
    - "RotaryDial has an orange glow ring on active/recent interaction state"
    - "Light-mode clay cards have a subtle ceramic/porcelain ripple texture"
    - "Active controls (checked toggle, focused dial) display pulsing accent glow"
  artifacts:
    - path: "src/styles/metal.css"
      provides: "Enhanced metal knob with specular highlight, deeper track shadows"
      contains: "metal-knob-enhanced"
    - path: "src/styles/clay.css"
      provides: "Ceramic ripple texture for light-mode cards"
      contains: "ceramic-ripple"
    - path: "src/components/ui/MetalToggle.tsx"
      provides: "Toggle with deeper track shadows, specular knob, accent glow when checked"
      contains: "accent-glow"
    - path: "src/components/ui/RotaryDial.tsx"
      provides: "Rotary dial with orange glow ring on focus/interaction"
      contains: "accent-glow"
  key_links:
    - from: "src/components/ui/MetalToggle.tsx"
      to: "src/styles/animations.css"
      via: "accent-glow-active CSS class on checked state"
      pattern: "accent-glow-active"
    - from: "src/components/ui/ClayCard.tsx"
      to: "src/styles/clay.css"
      via: "ceramic-ripple class in light mode"
      pattern: "ceramic-ripple"
---

<objective>
Apply skeuomorphic material enhancements to metal and clay components: specular highlights on knobs, deeper track shadows, accent glow rings, and ceramic texture on light-mode clay cards. All enhancements from SKEUOMORPHISM-REFERENCES.md.

Purpose: These CSS and inline-style enhancements bring the UI closer to the hyper-realistic hardware aesthetic from the Dribbble references, creating stronger material contrast and more tactile feel. Pure visual enhancement, no behavioral changes.

Output: Enhanced MetalToggle, MetalSlider, RotaryDial, ClayCard components with upgraded material aesthetics. Updated metal.css and clay.css.
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-animation-layer/05-RESEARCH.md
@.planning/phases/05-animation-layer/05-CONTEXT.md
@.planning/references/SKEUOMORPHISM-REFERENCES.md
@src/styles/metal.css
@src/styles/clay.css
@src/components/ui/MetalToggle.tsx
@src/components/ui/MetalSlider.tsx
@src/components/ui/RotaryDial.tsx
@src/components/ui/ClayCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance metal.css and clay.css with material classes</name>
  <files>
    src/styles/metal.css
    src/styles/clay.css
  </files>
  <action>
    **metal.css** — Add new classes at the end of the file:

    1. `.metal-knob-enhanced` — Enhanced knob with specular highlight (from skeu-toggle-dark.png reference):
       ```
       background:
         radial-gradient(ellipse at 35% 25%, rgba(255,255,255,0.5) 0%, transparent 30%),
         radial-gradient(ellipse at 40% 30%, var(--metal-shine) 0%, var(--metal-base) 55%, var(--metal-dark) 100%);
       ```
       The first gradient creates a bright specular highlight spot at top-left (simulating top-right light source). Overlays the existing metal-knob gradient pattern.

    2. `.metal-track-deep` — Deeper inset shadow for toggle/slider tracks (from skeu-toggle-dark.png reference):
       ```
       box-shadow:
         inset 0 3px 6px rgba(0,0,0,0.4),
         inset 0 1px 3px rgba(0,0,0,0.3),
         inset 0 -1px 2px rgba(255,255,255,0.08),
         0 1px 0 rgba(255,255,255,0.05);
       ```
       Deeper than current `inset 0 2px 4px rgba(0,0,0,0.3)` — more physically recessed.

    3. `.metal-knob-rim` — Rim light effect (light wrapping around the bottom of a sphere):
       ```
       box-shadow:
         0 2px 4px rgba(0,0,0,0.35),
         0 4px 8px rgba(0,0,0,0.15),
         inset 0 1px 0 rgba(255,255,255,0.4),
         inset 0 -1px 2px rgba(0,0,0,0.15);
       ```

    **clay.css** — Add new classes at the end of the file:

    1. `.ceramic-ripple` — Concentric ripple texture for light-mode clay cards (from skeu-panel-light-kosma.jpg reference). Uses `position: relative` and `::before` pseudo-element:
       ```css
       .ceramic-ripple {
         position: relative;
       }
       .ceramic-ripple::before {
         content: '';
         position: absolute;
         inset: 0;
         border-radius: inherit;
         pointer-events: none;
         opacity: 0.04;
         background:
           radial-gradient(circle at 50% 40%, transparent 30%, rgba(0,0,0,0.02) 35%, transparent 40%),
           radial-gradient(circle at 50% 40%, transparent 50%, rgba(0,0,0,0.015) 55%, transparent 60%),
           radial-gradient(circle at 50% 40%, transparent 70%, rgba(0,0,0,0.01) 75%, transparent 80%);
       }
       ```
       Only visible in light mode — 3 concentric semi-transparent rings creating embossed ceramic feel.

    2. `.clay-shadow-deep` — Enhanced floating card shadow for light mode (from Kosma panel):
       ```css
       .clay-shadow-deep {
         box-shadow:
           16px 16px 32px var(--clay-shadow),
           0 20px 40px rgba(0,0,0,0.12),
           inset -6px -6px 12px rgba(0,0,0,0.1),
           inset 0 8px 16px var(--clay-highlight);
       }
       ```
  </action>
  <verify>
    - `npm run build` succeeds
    - `grep "metal-knob-enhanced" src/styles/metal.css` confirms new class
    - `grep "metal-track-deep" src/styles/metal.css` confirms deep track class
    - `grep "ceramic-ripple" src/styles/clay.css` confirms ceramic texture class
  </verify>
  <done>metal.css has specular highlight knob, deep track, and rim light classes. clay.css has ceramic ripple texture and deep floating shadow classes.</done>
</task>

<task type="auto">
  <name>Task 2: Apply material enhancements to MetalToggle, MetalSlider, RotaryDial, and ClayCard</name>
  <files>
    src/components/ui/MetalToggle.tsx
    src/components/ui/MetalSlider.tsx
    src/components/ui/RotaryDial.tsx
    src/components/ui/ClayCard.tsx
  </files>
  <action>
    **MetalToggle.tsx** — 3 enhancements:
    1. **Deeper track shadow**: Replace current inline `boxShadow` on the track div with the enhanced version: `inset 0 3px 6px rgba(0,0,0,0.4), inset 0 1px 3px rgba(0,0,0,0.3), inset 0 -1px 2px rgba(255,255,255,0.08), 0 1px 0 rgba(255,255,255,0.05)` (deeper than current `inset 0 2px 4px rgba(0,0,0,0.3)`)
    2. **Specular highlight on knob**: Replace the `metal-knob` className on the knob motion.div with `metal-knob-enhanced` — this overlays the specular highlight gradient. Also replace inline boxShadow with the enhanced rim-light version: `0 2px 4px rgba(0,0,0,0.35), 0 4px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.15)`
    3. **Accent glow when checked**: When `checked=true`, add the `accent-glow-active` CSS class to the track div. This makes the track gently pulse with accent-colored glow, like a power indicator LED (from animations.css). Apply conditionally: `${checked ? 'accent-glow-active' : ''}`

    **MetalSlider.tsx** — 2 enhancements:
    1. **Deeper rail shadow**: Replace current inline `boxShadow` on the background rail div with `inset 0 3px 5px rgba(0,0,0,0.35), inset 0 1px 3px rgba(0,0,0,0.25), inset 0 -1px 2px rgba(255,255,255,0.06)`
    2. **Specular highlight on knob**: Replace `metal-knob` className on the knob motion.div with `metal-knob-enhanced`. Replace inline boxShadow with the enhanced rim-light version: `0 2px 4px rgba(0,0,0,0.35), 0 4px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.15)`

    **RotaryDial.tsx** — Glow ring + enhanced knob (Claude's discretion per context: "glow ring + shadow only" approach):
    1. Replace `metal-knob` class on the knob motion.div with `metal-knob-enhanced metal-shadow`
    2. Add an accent glow state: use a `useRef` to track recent interaction. When user clicks the dial, set a "glowing" state to true. Use `useEffect` with a 2s timeout to turn it off. When glowing, add `accent-glow-active` class to the knob wrapper div (the `relative w-14 h-14` container)
    3. Enhance active indicator dot: increase glow intensity from `0 0 6px` to `0 0 10px` for the active preset dot, and add a second glow layer: `0 0 20px ${PRESET_DOTS[PRESETS[i]]}40`
    4. Keep the existing spring animation (stiffness: 300, damping: 20) — per research: "Already correct, keep current"

    **ClayCard.tsx** — Ceramic texture in light mode:
    1. Import `useThemeStore` from `@/stores/themeStore` to detect dark mode
    2. Read `isDark` from theme store: `const isDark = useThemeStore((s) => s.isDark)`
    3. Add `ceramic-ripple` class conditionally: `${!isDark ? 'ceramic-ripple' : ''}` — only shows the concentric ring texture in light mode (per Kosma reference: light-mode panel aesthetic)
    4. This is purely additive — the existing `bg-white/[0.06] backdrop-blur-xl` styling remains unchanged. The ceramic-ripple pseudo-element sits on top at very low opacity (0.04)
  </action>
  <verify>
    - `npm run build` succeeds
    - `grep "metal-knob-enhanced" src/components/ui/MetalToggle.tsx` confirms specular highlight
    - `grep "accent-glow-active" src/components/ui/MetalToggle.tsx` confirms glow on checked
    - `grep "metal-knob-enhanced" src/components/ui/MetalSlider.tsx` confirms slider knob enhancement
    - `grep "metal-knob-enhanced" src/components/ui/RotaryDial.tsx` confirms dial knob enhancement
    - `grep "ceramic-ripple" src/components/ui/ClayCard.tsx` confirms light-mode texture
  </verify>
  <done>MetalToggle has deeper track, specular knob, and pulsing accent glow when checked. MetalSlider has deeper rail and specular knob. RotaryDial has accent glow ring on interaction. ClayCard has subtle ceramic ripple texture in light mode.</done>
</task>

</tasks>

<verification>
- `npm run build` passes cleanly
- Toggle switch shows visible specular highlight on knob surface and deeper track recess
- Slider knob has bright spot at top-left and rail looks more physically carved-in
- RotaryDial knob glows orange briefly after clicking, then fades
- Light mode: clay cards have subtle concentric ripple texture visible at close inspection
- Dark mode: ceramic ripple is not applied (dark mode only)
</verification>

<success_criteria>
- All 5 skeuomorphic enhancement areas from SKEUOMORPHISM-REFERENCES.md are implemented:
  1. Specular highlights on MetalToggle knob, MetalSlider knob, RotaryDial knob
  2. Deeper inset track shadows on MetalToggle and MetalSlider
  3. Material contrast strengthened (enhanced knobs vs matte tracks)
  4. Accent glow rings on MetalToggle (checked) and RotaryDial (recent interaction)
  5. Ceramic ripple surface texture on light-mode ClayCard
- Accent glow pulses gently (CSS animation, 2s cycle)
- RotaryDial glow fades after 2 seconds of inactivity
</success_criteria>

<output>
After completion, create `.planning/phases/05-animation-layer/05-05-SUMMARY.md`
</output>
