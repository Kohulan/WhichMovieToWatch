---
phase: 01-foundation-design-system
plan: 04
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/components/ui/MetalButton.tsx
  - src/components/ui/MetalToggle.tsx
  - src/components/ui/MetalSlider.tsx
  - src/components/ui/MetalCheckbox.tsx
  - src/components/ui/MetalDropdown.tsx
  - src/styles/metal.css
autonomous: true

must_haves:
  truths:
    - "Metal buttons display brushed metal gradient finish that contrasts against clay surfaces"
    - "Metal toggle switch slides between on/off with spring animation"
    - "Metal slider has a draggable knob on a metal rail"
    - "Metal checkbox shows a checkmark with tactile click feel"
    - "Metal dropdown opens a clay panel from a metal trigger button"
    - "All metal components use matched metal finish per theme preset (brass/chrome/gunmetal)"
    - "Interactive controls look clearly different from passive clay surfaces (two-material language)"
  artifacts:
    - path: "src/components/ui/MetalButton.tsx"
      provides: "Brushed metal button with gradient, hover lift, press depress"
      exports: ["MetalButton"]
    - path: "src/components/ui/MetalToggle.tsx"
      provides: "Skeuomorphic toggle switch (on/off) with spring knob animation"
      exports: ["MetalToggle"]
    - path: "src/components/ui/MetalSlider.tsx"
      provides: "Metal rail slider with draggable metal knob"
      exports: ["MetalSlider"]
    - path: "src/components/ui/MetalCheckbox.tsx"
      provides: "Metal-framed checkbox with checkmark animation"
      exports: ["MetalCheckbox"]
    - path: "src/components/ui/MetalDropdown.tsx"
      provides: "Metal trigger button that opens a clay dropdown panel"
      exports: ["MetalDropdown"]
    - path: "src/styles/metal.css"
      provides: "Brushed metal gradient base styles and shared metal utilities"
      contains: "metal-gradient"
  key_links:
    - from: "src/components/ui/MetalButton.tsx"
      to: "src/styles/app.css"
      via: "Uses --metal-base, --metal-shine, --metal-dark CSS variables"
      pattern: "var\\(--metal-"
    - from: "src/components/ui/MetalDropdown.tsx"
      to: "src/styles/app.css"
      via: "Dropdown panel uses --clay-* for clay surface, trigger uses --metal-*"
      pattern: "clay-surface|metal-base"
---

<objective>
Build the skeuomorphic hardware control library: MetalButton, MetalToggle, MetalSlider, MetalCheckbox, and MetalDropdown with brushed metal gradient finishes, matched metals per theme preset (brass/chrome/gunmetal), and spring-physics animations for tactile interaction feel.

Purpose: Deliver the interactive control components (things users interact with) in the hardware material language, visually distinct from clay surfaces. This completes the two-material design system.
Output: 5 reusable metal hardware components with full theme reactivity, matched metal finishes, and motion animations.
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-foundation-design-system/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create metal.css base styles for brushed metal effects</name>
  <files>
    src/styles/metal.css
  </files>
  <action>
    Create the foundational metal CSS shared across all hardware components:

    1. **Brushed metal gradient** — The signature multi-stop 45-degree linear gradient:
       ```css
       .metal-gradient {
         background: linear-gradient(
           45deg,
           var(--metal-dark) 5%,
           var(--metal-shine) 10%,
           var(--metal-base) 30%,
           var(--metal-shine) 50%,
           var(--metal-base) 70%,
           var(--metal-shine) 80%,
           var(--metal-dark) 95%
         );
       }
       ```

    2. **Metal shadow presets**:
       - `.metal-shadow`: `0 3px 6px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.2)` — standard raised metal
       - `.metal-shadow-pressed`: `0 1px 2px rgba(0,0,0,0.3), inset 0 2px 4px rgba(0,0,0,0.2)` — depressed metal
       - `.metal-shadow-hover`: `0 5px 10px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.3)` — lifted metal

    3. **Metal text styling**:
       ```css
       .metal-text {
         text-shadow: 0 1px 2px rgba(255,255,255,0.3);
         color: var(--clay-text);
       }
       ```

    4. **Metal knob/dial radial gradient** (for toggle knob, slider knob, rotary dial):
       ```css
       .metal-knob {
         background: radial-gradient(
           circle at 40% 40%,
           var(--metal-shine),
           var(--metal-base) 60%,
           var(--metal-dark)
         );
       }
       ```

    5. Import this file in `src/styles/app.css` (add `@import './metal.css';` after clay.css import)

    **Per user decision:** "Contrasting metal finish against clay surfaces — buttons clearly look like a different material." The metal gradient must look distinctly like brushed metal, not colored clay.
  </action>
  <verify>
    After importing metal.css, applying `.metal-gradient .metal-shadow` to a button in App.tsx shows a visible brushed metal appearance distinct from clay surfaces.
  </verify>
  <done>Metal CSS foundation with brushed gradient, 3 shadow states (default/pressed/hover), text styling, and radial knob gradient. Distinct material appearance from clay.</done>
</task>

<task type="auto">
  <name>Task 2: Build MetalButton, MetalToggle, MetalSlider, MetalCheckbox, and MetalDropdown components</name>
  <files>
    src/components/ui/MetalButton.tsx
    src/components/ui/MetalToggle.tsx
    src/components/ui/MetalSlider.tsx
    src/components/ui/MetalCheckbox.tsx
    src/components/ui/MetalDropdown.tsx
  </files>
  <action>
    Build all 5 hardware control components. Import `motion` from `motion/react`. Each uses --metal-* CSS variables for automatic theme-matched metal finish (brass for Cinema Gold, chrome for Ocean Blue, gunmetal for Neon Purple).

    **1. MetalButton** (`src/components/ui/MetalButton.tsx`):
    - Props: extends `React.ButtonHTMLAttributes<HTMLButtonElement>` + `variant?: 'primary' | 'secondary' | 'ghost'`, `size?: 'sm' | 'md' | 'lg'`, `children`
    - Renders `motion.button` with:
      - `.metal-gradient` background for primary, muted gradient for secondary, transparent for ghost
      - `.metal-shadow` box shadow
      - `.metal-text` styling
      - `rounded-lg` border radius (tighter than clay — precision hardware feel)
      - Size classes: sm = `px-3 py-1.5 text-sm`, md = `px-5 py-2.5 text-base`, lg = `px-7 py-3.5 text-lg`
      - `whileHover`: y: -1, metal-shadow-hover equivalent
      - `whileTap`: y: 1, metal-shadow-pressed equivalent
      - Spring transition: stiffness 400, damping 25 (firm, responsive)
    - `font-body font-semibold`, `cursor-pointer`, `select-none`
    - Accessible: inherits button semantics, supports disabled state (reduced opacity, no hover/tap)

    **2. MetalToggle** (`src/components/ui/MetalToggle.tsx`):
    - Props: `checked: boolean`, `onChange: (checked: boolean) => void`, `label?: string`, `disabled?: boolean`
    - Renders a toggle switch track with sliding knob:
      - Track: 48px wide, 24px tall, `rounded-full`, inset shadow (recessed channel)
        - Off state: `bg-clay-base` with inset shadow (recessed into clay surface)
        - On state: `bg-accent` with inset shadow
      - Knob: 20px diameter circle, `.metal-knob` radial gradient, `.metal-shadow`
        - Slides left (off) to right (on) with spring animation: stiffness 300, damping 20
      - `motion.div` for knob with `animate={{ x: checked ? 24 : 2 }}`
    - Premium hardware feel: The knob should look like a real metal switch with a slight 3D dome (radial gradient)
    - If label: render next to toggle, `font-body text-clay-text`
    - Accessible: role="switch", aria-checked, aria-label, keyboard toggle on Enter/Space

    **3. MetalSlider** (`src/components/ui/MetalSlider.tsx`):
    - Props: `value: number`, `onChange: (value: number) => void`, `min?: number` (default 0), `max?: number` (default 100), `step?: number` (default 1), `label?: string`
    - Renders a horizontal slider:
      - Rail: 4px tall, `rounded-full`, inset shadow (recessed groove), `bg-clay-base`
      - Fill: left portion of rail in `bg-accent`, represents current value
      - Knob: 20px diameter circle, `.metal-knob`, positioned at value percentage
      - `motion.div` for knob, draggable on x-axis only (`drag="x"`, `dragConstraints` to rail bounds)
      - OR use a styled native `<input type="range">` with custom CSS appearance — choose whichever approach is more robust for accessibility. If using custom div approach, add proper aria-role="slider", aria-valuenow, aria-valuemin, aria-valuemax
    - Value display: show current value next to label if provided
    - Accessible: keyboard arrows adjust value by step

    **4. MetalCheckbox** (`src/components/ui/MetalCheckbox.tsx`):
    - Props: `checked: boolean`, `onChange: (checked: boolean) => void`, `label?: string`, `disabled?: boolean`
    - Renders a premium checkbox:
      - Box: 20x20px, `rounded-md` (slightly rounded, not fully round), metal border/frame using `.metal-gradient` as border (2px)
      - Unchecked interior: `bg-clay-base` with subtle inset shadow (empty socket)
      - Checked: `bg-accent` with a white checkmark icon (Lucide `Check` icon, 14px)
      - `motion.div` for checkmark with scale animation: checked → scale from 0 to 1 with spring
    - If label: render next to checkbox, `font-body text-clay-text`
    - Accessible: uses hidden native `<input type="checkbox">` for form semantics + visual custom rendering, connected via id/htmlFor

    **5. MetalDropdown** (`src/components/ui/MetalDropdown.tsx`):
    - Props: `options: Array<{ value: string; label: string }>`, `value: string`, `onChange: (value: string) => void`, `placeholder?: string`, `label?: string`
    - Two distinct materials — user decision "material matches function":
      - Trigger button: `.metal-gradient`, `.metal-shadow`, displays selected value or placeholder, Lucide `ChevronDown` icon
      - Dropdown panel: `bg-clay-elevated`, `.clay-shadow-lg`, rounded-clay border radius (clay surface for the passive list)
    - Uses `AnimatePresence` for dropdown open/close animation:
      - Open: scaleY from 0.95, opacity from 0, originY: 0 (drops down from trigger)
      - Close: scaleY to 0.95, opacity to 0
    - Options list: each option is a clickable item with hover background change
    - Selected option highlighted with accent color
    - Click outside closes dropdown (useEffect with document click listener)
    - Accessible: role="listbox" on panel, role="option" on items, aria-expanded on trigger, keyboard navigation (arrow keys, Enter to select, Escape to close)

    **All hardware components must:**
    - Import from `motion/react` (NOT framer-motion)
    - Use --metal-* CSS variables (auto-matched per theme preset: brass/chrome/gunmetal)
    - Look distinctly like hardware, not clay — different material language
    - Feel tactile: firm spring animations (higher stiffness than clay components)
    - Accept `className` prop for composition (where applicable)
  </action>
  <verify>
    1. Add temporary showcase section in App.tsx rendering each metal component:
       - MetalButton in all 3 variants (primary, secondary, ghost) and 3 sizes
       - MetalToggle toggling on/off
       - MetalSlider dragging between values
       - MetalCheckbox checking/unchecking
       - MetalDropdown selecting from options
    2. Switch between all 6 theme variants — metal finish changes (brass/chrome/gunmetal)
    3. Place metal components on top of a ClayCard — two materials clearly distinguishable
    4. MetalButton hover lifts, press depresses
    5. MetalToggle knob slides with spring animation
    6. MetalSlider knob is draggable and value updates
    7. MetalCheckbox checkmark animates in/out
    8. MetalDropdown opens clay panel from metal trigger
    9. Keyboard accessibility: toggle with Enter/Space, slider with arrows, dropdown with arrows/Enter/Escape
  </verify>
  <done>5 hardware control components (MetalButton, MetalToggle, MetalSlider, MetalCheckbox, MetalDropdown) all with brushed metal gradient finish, theme-matched metals (brass/chrome/gunmetal), tactile spring animations, and clear visual distinction from clay surfaces.</done>
</task>

</tasks>

<verification>
- Metal components look like different material than clay components when placed side by side
- Brushed metal gradient visible with light/dark reflections at 45 degrees
- Theme switching changes metal finish: warm brass (Cinema Gold), cool chrome (Ocean Blue), dark gunmetal (Neon Purple)
- All 5 components functional with correct interaction patterns
- Spring animations feel firm and responsive (hardware, not soft like clay)
- Keyboard accessible: toggle, checkbox, slider, dropdown all operable without mouse
- No console errors from motion or React
</verification>

<success_criteria>
A complete hardware control component library where every interactive element has brushed metal finish, matched per theme preset, with tactile spring animations. The two-material design system is clearly visible: clay surfaces vs metal controls, following the "material matches function" rule.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-04-SUMMARY.md`
</output>
