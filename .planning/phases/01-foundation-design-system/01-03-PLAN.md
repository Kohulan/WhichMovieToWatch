---
phase: 01-foundation-design-system
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/components/ui/ClayCard.tsx
  - src/components/ui/ClayModal.tsx
  - src/components/ui/ClayInput.tsx
  - src/components/ui/ClayBadge.tsx
  - src/components/ui/ClaySkeletonCard.tsx
  - src/styles/clay.css
autonomous: true

must_haves:
  truths:
    - "Clay cards display with pronounced puffy 3D look (layered shadows + texture overlay)"
    - "Clay surfaces are tinted per active theme preset (gold, blue, purple)"
    - "Clay cards lift on hover and depress on press with spring animations"
    - "Clay input fields appear indented/pressed into surface (inset shadows)"
    - "Clay modal floats above content with backdrop blur/dim"
    - "Skeleton loading cards show shimmer animation within clay aesthetic"
    - "All clay components adapt to light and dark modes automatically"
    - "Clay texture overlay is visible on surfaces (plasticine grain)"
  artifacts:
    - path: "src/components/ui/ClayCard.tsx"
      provides: "Elevated clay surface component with hover/press animations and texture"
      exports: ["ClayCard"]
    - path: "src/components/ui/ClayModal.tsx"
      provides: "Floating clay panel with backdrop blur overlay"
      exports: ["ClayModal"]
    - path: "src/components/ui/ClayInput.tsx"
      provides: "Indented clay text input with inset shadows"
      exports: ["ClayInput"]
    - path: "src/components/ui/ClayBadge.tsx"
      provides: "Small clay surface for labels and tags"
      exports: ["ClayBadge"]
    - path: "src/components/ui/ClaySkeletonCard.tsx"
      provides: "Clay-styled skeleton loading placeholder with shimmer"
      exports: ["ClaySkeletonCard"]
    - path: "src/styles/clay.css"
      provides: "Clay texture overlay, base shadow utilities, shimmer keyframes"
      contains: "clay-texture"
  key_links:
    - from: "src/components/ui/ClayCard.tsx"
      to: "src/styles/app.css"
      via: "Tailwind classes using --clay-* CSS variables"
      pattern: "clay-surface|clay-shadow|clay-highlight"
    - from: "src/styles/clay.css"
      to: "src/styles/app.css"
      via: "References --clay-* variables defined in app.css theme blocks"
      pattern: "var\\(--clay-"
---

<objective>
Build the clay surface component library: ClayCard, ClayModal, ClayInput, ClayBadge, and ClaySkeletonCard with visible plasticine texture, layered shadows for 3D depth, theme-tinted surfaces, and Framer Motion spring animations for hover/press interactions.

Purpose: Deliver the passive surface components (things users look at) in the clay + hardware material language. These are the containers and display elements of the design system.
Output: 5 reusable clay components with full theme reactivity and motion animations, plus clay.css base styles.
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-foundation-design-system/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create clay.css base styles and clay texture system</name>
  <files>
    src/styles/clay.css
  </files>
  <action>
    Create the foundational clay CSS that all clay components share:

    1. **Clay texture overlay** — Use an inline SVG data URI with feTurbulence for plasticine grain:
       ```css
       .clay-texture::after {
         content: '';
         position: absolute;
         inset: 0;
         border-radius: inherit;
         pointer-events: none;
         mix-blend-mode: overlay;
         opacity: 0.08;
         background-image: url("data:image/svg+xml,..."); /* feTurbulence noise SVG */
       }
       ```
       The SVG should use: `<feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/>` with a saturate=0 color matrix and overlay blend.

    2. **Clay shadow presets** as CSS utility classes:
       - `.clay-shadow-sm`: Subtle flat clay (background layer) — `4px 4px 8px var(--clay-shadow)`
       - `.clay-shadow-md`: Standard elevated clay — `8px 8px 16px var(--clay-shadow), inset -4px -4px 8px rgba(0,0,0,0.08), inset 0 6px 12px var(--clay-highlight)`
       - `.clay-shadow-lg`: Highly elevated clay (cards, modals) — `16px 16px 32px var(--clay-shadow), inset -6px -6px 12px rgba(0,0,0,0.1), inset 0 8px 16px var(--clay-highlight)`
       - `.clay-shadow-inset`: Pressed-in clay (inputs) — `inset 4px 4px 8px var(--clay-shadow), inset -2px -2px 6px var(--clay-highlight)`

    3. **Shimmer animation keyframes** for skeleton loading:
       ```css
       @keyframes clay-shimmer {
         0% { background-position: -200% 0; }
         100% { background-position: 200% 0; }
       }
       ```

    4. Import this file in `src/styles/app.css` (add `@import './clay.css';` after the tailwindcss import)

    **Per user decision:** The clay must have "visible plasticine/clay texture overlay on surfaces (not smooth/glossy)" and "bold, full clay toy feel — pronounced puffy 3D look, not subtle". Make shadows BOLD — not delicate neumorphism, but chunky 3D clay.
  </action>
  <verify>
    After importing clay.css, applying `.clay-texture` and `.clay-shadow-lg` to a div in App.tsx shows visible texture grain and pronounced 3D shadow effect.
  </verify>
  <done>Clay CSS foundation with texture overlay system, 4 shadow presets (sm/md/lg/inset), and shimmer animation keyframes. Bold, visible clay effects, not subtle.</done>
</task>

<task type="auto">
  <name>Task 2: Build ClayCard, ClayModal, ClayInput, ClayBadge, and ClaySkeletonCard components</name>
  <files>
    src/components/ui/ClayCard.tsx
    src/components/ui/ClayModal.tsx
    src/components/ui/ClayInput.tsx
    src/components/ui/ClayBadge.tsx
    src/components/ui/ClaySkeletonCard.tsx
  </files>
  <action>
    Build all 5 clay surface components. Each uses `motion` from `motion/react` for spring animations and references --clay-* CSS variables for automatic theme reactivity.

    **1. ClayCard** (`src/components/ui/ClayCard.tsx`):
    - Props: `children`, `className?`, `elevated?: boolean` (default true), `as?: 'div' | 'section' | 'article'`
    - Renders a `motion.div` (or dynamic element) with:
      - `bg-clay-surface` background, `rounded-clay-lg` border radius
      - `.clay-texture` class for grain overlay
      - If elevated: `.clay-shadow-lg` shadows. If not: `.clay-shadow-sm`
      - `whileHover`: y: -2, enhanced shadow (shadow lifts), spring stiffness 300, damping 20
      - `whileTap`: y: 1, scale: 0.98, compressed shadow (shadow depresses), spring stiffness 400, damping 25
    - Content wrapped in `relative z-10` div (above texture overlay)
    - Per user decision: "both shape deformation AND lighting shift on hover/press"

    **2. ClayModal** (`src/components/ui/ClayModal.tsx`):
    - Props: `isOpen: boolean`, `onClose: () => void`, `children`, `title?: string`, `className?`
    - Uses `AnimatePresence` from `motion/react` for enter/exit
    - Backdrop: fixed inset-0, `bg-black/50 backdrop-blur-sm`, click to close
    - Modal panel: centered, `bg-clay-elevated`, `.clay-texture`, `.clay-shadow-lg`, max-w-lg, mx-auto, rounded-clay-xl
    - Entry animation: scale from 0.9, opacity from 0, spring transition
    - Exit animation: scale to 0.95, opacity to 0
    - Close button in top-right corner using Lucide `X` icon
    - If `title` provided, render in `font-heading text-clay-text` in the header area
    - Trap focus inside modal (basic: autoFocus on close button)
    - Accessible: role="dialog", aria-modal="true", aria-labelledby if title

    **3. ClayInput** (`src/components/ui/ClayInput.tsx`):
    - Props: extends `React.InputHTMLAttributes<HTMLInputElement>` + `label?: string`, `error?: string`
    - Per user decision: text inputs are "indented clay (pressed into surface)"
    - Use `.clay-shadow-inset` for the pressed-in look
    - Background: `bg-clay-base` (lower than surface — pressed into the background layer)
    - `.clay-texture` on the input field surface
    - `rounded-clay` border radius, padding for medium density
    - On focus: slightly deeper inset shadow + accent border glow (`ring-2 ring-accent`)
    - `font-body` text, `text-clay-text` color, `placeholder:text-clay-text-muted`
    - If `label`: render above input in `font-body font-medium text-clay-text`
    - If `error`: render below input in red text with slightly deepened inset shadow, red-tinted border
    - Accessible: id + htmlFor linking if label, aria-invalid if error, aria-describedby for error message

    **4. ClayBadge** (`src/components/ui/ClayBadge.tsx`):
    - Props: `children`, `variant?: 'default' | 'accent' | 'muted'`, `size?: 'sm' | 'md'`, `className?`
    - Small clay surface for labels, tags, ratings
    - `bg-clay-surface` (default), `bg-accent` (accent variant), `bg-clay-base` (muted variant)
    - `.clay-shadow-sm`, `rounded-clay` (smaller radius than cards)
    - Compact padding: sm = `px-2 py-0.5 text-xs`, md = `px-3 py-1 text-sm`
    - `font-body font-medium`, appropriate text color per variant
    - Subtle clay texture (lower opacity than cards)

    **5. ClaySkeletonCard** (`src/components/ui/ClaySkeletonCard.tsx`):
    - Props: `className?`, `lines?: number` (default 3), `hasImage?: boolean` (default true)
    - Clay-styled skeleton placeholder matching ClayCard dimensions
    - Uses `.clay-shadow-md` for the card container
    - Internal placeholder bars use the shimmer animation from clay.css:
      ```
      background: linear-gradient(90deg, transparent 0%, var(--clay-highlight) 50%, transparent 100%)
      background-size: 200% 100%
      animation: clay-shimmer 1.5s ease-in-out infinite
      ```
    - If `hasImage`: a large rectangular placeholder at the top (image area)
    - `lines` number of text line placeholders below (varying widths: 100%, 80%, 60%)
    - Rounded corners matching clay aesthetic, `bg-clay-base` for placeholder bars

    **All components must:**
    - Use `motion/react` imports (NOT framer-motion)
    - Reference only CSS variable names (--clay-*) for automatic theme reactivity
    - Accept `className` prop for composition
    - Be self-contained (no external state dependencies except CSS variables)
  </action>
  <verify>
    1. Add a temporary showcase section in App.tsx rendering each component:
       - ClayCard with text content
       - ClayModal triggered by a button
       - ClayInput with label and an error state example
       - ClayBadge in all variants
       - ClaySkeletonCard with shimmer animation
    2. Switch between all 6 theme variants — every component adapts colors
    3. Hover over ClayCard — lifts up with shadow change
    4. Press ClayCard — depresses with scale and shadow change
    5. ClayModal opens with animation, backdrop blur visible, closes on backdrop click
    6. ClayInput shows pressed-in look, focus ring on focus
    7. ClaySkeletonCard shimmer animation runs smoothly
    8. Clay texture grain visible on card surfaces (especially on light mode)
  </verify>
  <done>5 clay surface components (ClayCard, ClayModal, ClayInput, ClayBadge, ClaySkeletonCard) all with visible plasticine texture, layered 3D shadows, spring animations, and automatic theme reactivity across all 6 theme variants.</done>
</task>

</tasks>

<verification>
- All clay components render with visible 3D depth (not flat, not subtle)
- Clay texture grain visible on surfaces
- Theme switching changes clay tint across all components
- Dark mode clay is rich/saturated dark material, not dimmed
- Hover/press animations feel physical (spring physics)
- Modal backdrop blur and animation work
- Input indented look is distinct from elevated card look
- Skeleton shimmer animates smoothly
- No console errors from motion or React
</verification>

<success_criteria>
A complete clay surface component library where every component has bold 3D depth, visible plasticine texture, theme-reactive tinting, and spring-physics animations. The material language is clearly "clay" — puffy, tactile, with depth hierarchy (flat background < elevated cards < floating modals).
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-03-SUMMARY.md`
</output>
