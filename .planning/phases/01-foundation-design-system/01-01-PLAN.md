---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/vite-env.d.ts
  - src/styles/app.css
  - .gitignore
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Developer can run npm run dev and see a working React app with HMR"
    - "Tailwind CSS v4 utility classes generate correctly from @theme tokens"
    - "HashRouter renders the root route without 404"
    - "Build-time environment variables are accessible via import.meta.env"
    - "Production build creates separate vendor chunks (react-vendor, animation-vendor)"
    - "Righteous and Poppins fonts render correctly"
    - "Lucide React icons render in the app"
  artifacts:
    - path: "package.json"
      provides: "All project dependencies"
      contains: "react"
    - path: "vite.config.ts"
      provides: "Vite build config with Tailwind plugin and manual chunks"
      exports: ["default"]
    - path: "src/main.tsx"
      provides: "React entry point with HashRouter"
      contains: "createHashRouter"
    - path: "src/styles/app.css"
      provides: "Tailwind v4 import with @theme tokens"
      contains: "@import"
    - path: "index.html"
      provides: "HTML shell with React mount point"
      contains: "root"
  key_links:
    - from: "src/main.tsx"
      to: "src/App.tsx"
      via: "HashRouter route element"
      pattern: "element.*App"
    - from: "vite.config.ts"
      to: "src/styles/app.css"
      via: "Tailwind Vite plugin processes CSS"
      pattern: "tailwindcss"
    - from: "index.html"
      to: "src/main.tsx"
      via: "script module entry"
      pattern: "src/main.tsx"
---

<objective>
Scaffold the complete React 19 + Vite 6 + TypeScript 5.7 project foundation with all dependencies installed, Tailwind CSS v4 configured via @theme directive, HashRouter for GitHub Pages SPA routing, build-time environment variables, manual code-splitting chunks, self-hosted fonts (Righteous + Poppins), and Lucide React icon system.

Purpose: Establish the build toolchain and project structure that all subsequent plans depend on. Nothing else can be built until this foundation exists.
Output: A running React dev server with all tooling configured and a production build that creates properly split chunks.
</objective>

<execution_context>
@/Users/kohulanrajan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kohulanrajan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite + React + TypeScript project with all dependencies</name>
  <files>
    package.json
    vite.config.ts
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    index.html
    src/main.tsx
    src/App.tsx
    src/vite-env.d.ts
    .gitignore
    .env.example
  </files>
  <action>
    **IMPORTANT: This is a rewrite project. The existing vanilla JS files (scripts/, css/, etc.) stay in place during Phase 1. The new React app is built inside src/ alongside the old code. Do NOT delete any existing files.**

    1. Initialize the project (the repo already has a package.json with `{}`):
       - Run `npm create vite@latest . -- --template react-ts` or manually create the scaffold files. Since the directory already exists with content, manually create the Vite scaffold files rather than running create-vite which may fail on non-empty directories.
       - Create `package.json` with proper name "whichmovietowatch", scripts (dev, build, preview), and these dependencies:
         - react@^19, react-dom@^19
         - @types/react@^19, @types/react-dom@^19 (devDeps)
         - typescript@~5.7 (devDep)
         - vite@^6 (devDep)
         - @vitejs/plugin-react@^4 (devDep)
         - tailwindcss@^4, @tailwindcss/vite@^4
         - motion@^11
         - zustand@^5
         - react-router@^7
         - lucide-react@latest
         - @fontsource/righteous@latest, @fontsource/poppins@latest
       - Run `npm install`

    2. Create `vite.config.ts`:
       - Import and use `@vitejs/plugin-react` and `@tailwindcss/vite`
       - Set `base: '/'` (custom domain whichmovieto.watch is active per CNAME file)
       - Configure `build.rollupOptions.output.manualChunks` with a function:
         - `react-vendor`: react, react-dom, react-router
         - `animation-vendor`: motion (the `motion` package, NOT `framer-motion` — check for `node_modules/motion`)
         - `three-vendor`: three, @react-three (for future Phase 7, chunk won't exist until those deps are installed)
       - Do NOT create tailwind.config.js or postcss.config.js (Tailwind v4 CSS-first approach)

    3. Create TypeScript configs:
       - `tsconfig.json`: project references to tsconfig.app.json and tsconfig.node.json
       - `tsconfig.app.json`: target ES2020, lib ["ES2020", "DOM", "DOM.Iterable"], module ESNext, moduleResolution bundler, jsx react-jsx, strict false (per decision: start with strict:false, enable incrementally), include ["src"]. Add path alias: "@/*" -> ["./src/*"]
       - `tsconfig.node.json`: for vite.config.ts, include ["vite.config.ts"]

    4. Create `index.html` at project root:
       - Standard Vite HTML with `<div id="root"></div>`
       - Script tag: `<script type="module" src="/src/main.tsx"></script>`
       - Include a placeholder `<script>` block in `<head>` (before React mounts) for theme flash prevention — just the structure, actual logic comes in Plan 02:
         ```html
         <script>
           // Theme flash prevention — populated in Plan 02
         </script>
         ```
       - Set lang="en", proper meta viewport

    5. Create `src/main.tsx`:
       - Import `@fontsource/righteous` and `@fontsource/poppins` (weights 400, 500, 600, 700)
       - Import `./styles/app.css`
       - Use `createHashRouter` from `react-router` (NOT react-router-dom)
       - Define a single root route with `<App />` as element
       - Render with `createRoot` + `<StrictMode>` + `<RouterProvider>`

    6. Create `src/App.tsx`:
       - Simple placeholder component that renders a heading "Which Movie To Watch" using Righteous font
       - Import and display a Lucide icon (e.g., `Film` or `Clapperboard`) to verify icons work
       - Display text "Foundation ready" using Poppins font
       - Use Tailwind utility classes to verify they work (e.g., `bg-clay-base text-clay-text p-8 rounded-clay`)

    7. Create `src/styles/app.css`:
       - `@import "tailwindcss";`
       - Add `@theme inline` block with placeholder design tokens:
         - Colors: `--color-clay-base`, `--color-clay-surface`, `--color-clay-elevated`, `--color-clay-shadow`, `--color-clay-highlight`, `--color-clay-text`, `--color-clay-text-muted`, `--color-metal-base`, `--color-metal-shine`, `--color-metal-dark`, `--color-accent`, `--color-accent-hover`
         - All color tokens should use `var(--variable-name)` pattern for runtime override
         - Static tokens: `--radius-clay: 1.5rem`, `--radius-clay-lg: 2rem`, `--radius-clay-xl: 3rem`
         - Font tokens: `--font-heading: 'Righteous', cursive`, `--font-body: 'Poppins', sans-serif`
       - Add default `:root` CSS variables with Cinema Gold Light values as fallback (so the app has visible colors before Plan 02's full theme system):
         ```css
         :root {
           --clay-base: oklch(0.92 0.03 85);
           --clay-surface: oklch(0.95 0.025 85);
           --clay-elevated: oklch(0.97 0.02 85);
           --clay-shadow: oklch(0.55 0.05 85);
           --clay-highlight: oklch(0.99 0.01 85);
           --clay-text: oklch(0.25 0.02 85);
           --clay-text-muted: oklch(0.5 0.03 85);
           --metal-base: oklch(0.75 0.02 85);
           --metal-shine: oklch(0.92 0.01 85);
           --metal-dark: oklch(0.45 0.03 85);
           --accent: oklch(0.7 0.12 85);
           --accent-hover: oklch(0.65 0.14 85);
         }
         ```

    8. Create `src/vite-env.d.ts`:
       - Standard Vite client types reference
       - Add type declarations for `import.meta.env.VITE_TMDB_API_KEY` and `import.meta.env.VITE_OMDB_API_KEY`

    9. Create `.env.example` (NOT .env — never commit real keys):
       ```
       VITE_TMDB_API_KEY=your_tmdb_api_key_here
       VITE_OMDB_API_KEY=your_omdb_api_key_here
       ```

    10. Update `.gitignore`:
        - Add standard Vite ignores: `dist/`, `node_modules/`, `.env`, `.env.local`, `.env.*.local`
        - Keep existing entries (api-config.js, etc.)

    **Anti-patterns to avoid:**
    - Do NOT create `tailwind.config.js` — Tailwind v4 is CSS-first
    - Do NOT create `postcss.config.js` — @tailwindcss/vite replaces PostCSS
    - Do NOT import from `framer-motion` — use `motion` package, import from `motion/react`
    - Do NOT import from `react-router-dom` — use `react-router` in v7
    - Do NOT reference env vars dynamically — always use full string `import.meta.env.VITE_TMDB_API_KEY`
  </action>
  <verify>
    1. `npm run dev` starts without errors and shows the app at localhost:5173 (or next available port)
    2. `npm run build` completes successfully and `ls dist/assets/` shows separate chunk files: react-vendor-*.js and animation-vendor-*.js must exist (three-vendor won't exist until Phase 7 deps are installed)
    3. The rendered page shows "Which Movie To Watch" in Righteous font and "Foundation ready" in Poppins font
    4. A Lucide icon is visible on the page
    5. Tailwind utility classes are applied (visible via browser DevTools or visual inspection)
    6. Browser DevTools console shows no errors
    7. `import.meta.env.VITE_TMDB_API_KEY` is accessible in code (undefined if no .env, but no error)
  </verify>
  <done>
    Running React 19 + Vite 6 + TypeScript app with Tailwind v4 CSS-first config, HashRouter, self-hosted Righteous and Poppins fonts, Lucide icons rendering, and production build creating react-vendor and animation-vendor chunks. No tailwind.config.js, no postcss.config.js.
  </done>
</task>

</tasks>

<verification>
- `npm run dev` — dev server starts with HMR
- `npm run build && ls dist/assets/` — production build creates chunk files
- `npm run preview` — preview server serves the built app correctly
- Page renders with correct fonts (Righteous heading, Poppins body)
- Lucide React icon visible
- Tailwind utilities applied to elements
- Browser console clean (no errors)
</verification>

<success_criteria>
A fully configured React + Vite + TypeScript project that builds and runs, with Tailwind v4 CSS-first tokens, HashRouter routing, code-split vendor chunks, self-hosted fonts, and Lucide icons — ready for the theme system and component library in subsequent plans.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
